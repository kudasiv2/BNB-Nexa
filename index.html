<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BNBNexa - Where Innovation Meets Stability</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <style>
        :root {
            --navy: #0a0f2b;
            --navy-light: #1a1f3b;
            --purple: #6a11cb;
            --purple-light: #8a2be2;
            --glow: 0 0 10px rgba(138, 43, 226, 0.7);
            --white: #ffffff;
            --gray: #e0e0e0;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
            color: var(--white);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: rgba(10, 15, 43, 0.95);
            padding: 20px 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: var(--glow);
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            height: 40px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(to right, var(--white), var(--purple-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hamburger-menu {
            display: flex;
            flex-direction: column;
            cursor: pointer;
            gap: 5px;
            padding: 5px;
            z-index: 1001;
        }

        .hamburger-menu span {
            width: 30px;
            height: 3px;
            background-color: var(--white);
            transition: var(--transition);
        }

        .hamburger-menu.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .hamburger-menu.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .nav-menu {
            position: fixed;
            top: 80px;
            right: 0;
            background-color: var(--navy-light);
            width: 250px;
            height: calc(100vh - 80px);
            transform: translateX(100%);
            transition: var(--transition);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            z-index: 999;
            padding: 20px;
        }

        .nav-menu.active {
            transform: translateX(0);
        }

        .nav-menu ul {
            list-style: none;
        }

        .nav-menu ul li {
            margin-bottom: 15px;
        }

        .nav-menu ul li a {
            color: var(--white);
            text-decoration: none;
            font-size: 18px;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: var(--transition);
        }

        .nav-menu ul li a:hover {
            background-color: var(--purple);
            box-shadow: var(--glow);
        }

        /* Main Content */
        main {
            margin-top: 80px;
        }

        section {
            padding: 80px 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .section-content {
            width: 100%;
        }

        /* Home Section */
        #home {
            text-align: center;
            background: radial-gradient(circle at center, var(--navy-light) 0%, var(--navy) 100%);
        }

        .headline {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, var(--white), var(--purple-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: var(--glow);
        }

        .subheadline {
            font-size: 1.5rem;
            margin-bottom: 40px;
            color: var(--gray);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 15px 30px;
            background: linear-gradient(to right, var(--purple), var(--purple-light));
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--glow);
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(138, 43, 226, 0.5);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .wallet-info {
            margin-top: 30px;
            padding: 20px;
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            display: inline-block;
            box-shadow: var(--glow);
            animation: fadeIn 0.5s ease;
            text-align: center;
            width: 100%;
            max-width: 600px;
        }

        .wallet-address {
            font-family: monospace;
            margin-bottom: 15px;
            word-break: break-all;
        }

        .blinking-dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: #00ff00;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 50px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--navy-light) 0%, var(--purple) 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--glow);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-10px);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.2rem;
            color: var(--gray);
        }

        /* Invest Section */
        #invest {
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 50px;
            background: linear-gradient(to right, var(--white), var(--purple-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .plans-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .plan-card {
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: var(--glow);
            transition: var(--transition);
            border: 2px solid transparent;
            cursor: pointer;
        }

        .plan-card:hover {
            transform: translateY(-10px);
            border-color: var(--purple);
        }

        .plan-card.active {
            border-color: var(--purple);
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.7);
        }

        .plan-name {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--purple-light);
        }

        .plan-range {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .plan-roi {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #00ff00;
        }

        .plan-duration {
            font-size: 1.1rem;
            color: var(--gray);
        }

        .invest-box {
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--glow);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            background-color: rgba(10, 15, 43, 0.7);
            border: 2px solid var(--purple);
            border-radius: 10px;
            color: var(--white);
            font-size: 16px;
            transition: var(--transition);
        }

        .form-group input:focus {
            outline: none;
            box-shadow: var(--glow);
        }

        .info-box {
            background-color: rgba(10, 15, 43, 0.7);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
        }

        .info-label {
            color: var(--gray);
        }

        .info-value {
            font-weight: 600;
        }

        .warning {
            background-color: rgba(255, 193, 7, 0.2);
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        /* Dashboard Section */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .dashboard-card {
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--glow);
            text-align: center;
        }

        .dashboard-card h3 {
            margin-bottom: 15px;
            color: var(--purple-light);
        }

        .dashboard-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-withdraw {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            min-width: 180px;
        }

        .btn-withdraw .amount {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .btn-secondary {
            background: linear-gradient(to right, var(--navy-light), var(--purple));
        }

        /* Referral Section */
        .referral-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .referral-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .referral-card {
            background: linear-gradient(135deg, var(--navy-light) 0%, var(--purple) 100%);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--glow);
            transition: var(--transition);
        }

        .referral-card:hover {
            transform: translateY(-10px);
        }

        .referral-level {
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .referral-percent {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .referral-count {
            font-size: 1.2rem;
            color: var(--gray);
        }

        .referral-link-box {
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--glow);
            text-align: center;
        }

        .referral-link-container {
            display: flex;
            margin-top: 15px;
        }

        .referral-link {
            flex: 1;
            padding: 12px 15px;
            background-color: rgba(10, 15, 43, 0.7);
            border: 2px solid var(--purple);
            border-radius: 10px 0 0 10px;
            color: var(--white);
            font-family: monospace;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .btn-copy {
            border-radius: 0 10px 10px 0;
            padding: 12px 20px;
        }

        /* How to Join Section */
        .steps-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 20px;
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--glow);
        }

        .step-number {
            background: linear-gradient(to right, var(--purple), var(--purple-light));
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .step-content h3 {
            margin-bottom: 10px;
            color: var(--purple-light);
            font-size: 1.5rem;
        }

        .step-content p {
            font-size: 1.1rem;
        }

        /* FAQ Section */
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .faq-item {
            margin-bottom: 15px;
            background-color: rgba(26, 31, 59, 0.7);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--glow);
        }

        .faq-question {
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            transition: var(--transition);
        }

        .faq-question:hover {
            background-color: rgba(106, 17, 203, 0.3);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: var(--transition);
        }

        .faq-item.active .faq-answer {
            padding: 20px;
            max-height: 500px;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        /* Security Section */
        .security-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .security-content p {
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        /* Footer */
        footer {
            background-color: var(--navy);
            padding: 50px 0 20px;
            text-align: center;
        }

        .footer-logo {
            margin-bottom: 20px;
        }

        .footer-logo img {
            height: 60px;
        }

        .footer-subheadline {
            margin-bottom: 30px;
            color: var(--gray);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .footer-links a {
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--purple-light);
        }

        .social-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: var(--navy-light);
            border-radius: 50%;
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
        }

        .social-icons a:hover {
            background-color: var(--purple);
            transform: translateY(-5px);
            box-shadow: var(--glow);
        }

        .copyright {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            background-color: var(--purple);
            color: white;
            border-radius: 10px;
            box-shadow: var(--glow);
            z-index: 1002;
            transform: translate(-50%, 100px);
            opacity: 0;
            transition: var(--transition);
            text-align: center;
            max-width: 90%;
        }

        .toast.show {
            transform: translate(-50%, 0);
            opacity: 1;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1003;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--navy) 0%, var(--navy-light) 100%);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: var(--glow);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal h2 {
            margin-bottom: 20px;
            color: var(--purple-light);
        }

        .modal p {
            margin-bottom: 25px;
            font-size: 1.1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .headline {
                font-size: 2.5rem;
            }
            
            .subheadline {
                font-size: 1.2rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-withdraw {
                width: 100%;
                max-width: 300px;
            }
            
            .step {
                flex-direction: column;
                text-align: center;
            }
            
            .referral-link-container {
                flex-direction: column;
            }
            
            .referral-link {
                border-radius: 10px 10px 0 0;
            }
            
            .btn-copy {
                border-radius: 0 0 10px 10px;
            }
            
            .plans-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <h2>Investment Successful!</h2>
            <p>You have successfully invested <span id="investedAmount">0</span> BNB.</p>
            <p>Your investment will start generating returns immediately.</p>
            <button class="btn" id="goToDashboard">
                <i class="fas fa-tachometer-alt"></i> Go to Dashboard
            </button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="https://files.catbox.moe/3g1eaq.png" alt="BNBNexa Logo">
                    <div class="logo-text">BNBNexa</div>
                </div>
                <div class="hamburger-menu" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
        <nav class="nav-menu" id="navMenu">
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#invest">Invest</a></li>
                <li><a href="#dashboard">Dashboard</a></li>
                <li><a href="#referral">Referral</a></li>
                <li><a href="#how-to-join">How to Join</a></li>
                <li><a href="#faq">FAQ</a></li>
                <li><a href="#security">Security</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="home">
            <div class="container">
                <div class="section-content">
                    <h1 class="headline">BNBNexa</h1>
                    <p class="subheadline">Where Innovation Meets Stability – Farming Made Smarter on Binance Smart Chain</p>
                    <div id="walletInfo" class="wallet-info" style="display: none;">
                        <p class="wallet-address">
                            <span class="blinking-dot"></span>
                            Connected: <span id="walletAddress"></span>
                        </p>
                        <p id="uplineAddress" style="margin-bottom: 20px; font-size: 0.9rem; color: var(--gray);">
                            Upline: <span id="uplineAddressValue">Not available</span>
                        </p>
                        <button class="btn" id="investNow">
                            <i class="fas fa-coins"></i> Invest Now
                        </button>
                    </div>

                    <!-- Stats Section -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="tvlValue">0 BNB</div>
                            <div class="stat-label">Total Value Locked</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalUsers">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalPaidROI">0 BNB</div>
                            <div class="stat-label">Total Paid ROI</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalPaidReferral">0 BNB</div>
                            <div class="stat-label">Total Paid Referral</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Invest Section -->
        <section id="invest">
            <div class="container">
                <h2 class="section-title">Investment Plans</h2>
                
                <div class="plans-container">
                    <div class="plan-card" data-plan="1">
                        <div class="plan-name">Basic Plan</div>
                        <div class="plan-range">0.01 BNB - 1 BNB</div>
                        <div class="plan-roi">1% Daily ROI</div>
                        <div class="plan-duration">120 Days Duration</div>
                    </div>
                    <div class="plan-card" data-plan="2">
                        <div class="plan-name">Standard Plan</div>
                        <div class="plan-range">1 BNB - 5 BNB</div>
                        <div class="plan-roi">1.2% Daily ROI</div>
                        <div class="plan-duration">120 Days Duration</div>
                    </div>
                    <div class="plan-card" data-plan="3">
                        <div class="plan-name">Premium Plan</div>
                        <div class="plan-range">5 BNB - Unlimited</div>
                        <div class="plan-roi">1.5% Daily ROI</div>
                        <div class="plan-duration">120 Days Duration</div>
                    </div>
                </div>

                <h2 class="section-title">Make Investment</h2>
                <div class="invest-box">
                    <div class="form-group">
                        <label for="depositAmount">Deposit Amount (BNB)</label>
                        <input type="number" id="depositAmount" min="0.01" step="0.01" placeholder="Minimum 0.01 BNB">
                    </div>
                    <div class="info-box">
                        <span class="info-label">Selected Plan:</span>
                        <span class="info-value" id="selectedPlan">None</span>
                    </div>
                    <div class="info-box">
                        <span class="info-label">Daily Profit:</span>
                        <span class="info-value" id="dailyProfit">0 BNB</span>
                    </div>
                    <div class="info-box">
                        <span class="info-label">Total Return:</span>
                        <span class="info-value" id="totalReturn">0 BNB</span>
                    </div>
                    <div id="investWarning" class="warning" style="display: none;">
                        Connect Wallet to Get Started!
                    </div>
                    <button class="btn" id="investButton" style="width: 100%; text-align: center;">
                        <i class="fas fa-piggy-bank"></i> Invest Now
                    </button>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard">
            <div class="container">
                <h2 class="section-title">Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Active Deposit</h3>
                        <div class="dashboard-value" id="activeDeposit">0 BNB</div>
                        <p id="depositExpiry">Duration: 0 Days Left</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Total Withdraw</h3>
                        <div class="dashboard-value" id="totalWithdraw">0 BNB</div>
                        <p>ROI + Referral Earnings</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Available ROI</h3>
                        <div class="dashboard-value" id="availableROI">0 BNB</div>
                        <p>Ready to Withdraw</p>
                    </div>
                    <div class="dashboard-card">
                        <h3>Referral Bonus</h3>
                        <div class="dashboard-value" id="referralBonus">0 BNB</div>
                        <p>Total Referral Earnings</p>
                    </div>
                </div>
                <div class="btn-group">
                    <div class="btn-withdraw">
                        <button class="btn" id="withdrawROI">
                            <i class="fas fa-hand-holding-usd"></i> Withdraw ROI
                        </button>
                        <div class="amount" id="roiAmount">0 BNB available</div>
                    </div>
                    <div class="btn-withdraw">
                        <button class="btn btn-secondary" id="withdrawReferral">
                            <i class="fas fa-users"></i> Withdraw Referral
                        </button>
                        <div class="amount" id="referralAmount">0 BNB available</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Referral Section -->
        <section id="referral">
            <div class="container">
                <h2 class="section-title">Referral Program</h2>
                <div class="referral-container">
                    <div class="referral-grid">
                        <div class="referral-card">
                            <div class="referral-level">Level 1</div>
                            <div class="referral-percent">5%</div>
                            <div class="referral-count" id="level1Count">0 Members</div>
                        </div>
                        <div class="referral-card">
                            <div class="referral-level">Level 2</div>
                            <div class="referral-percent">3%</div>
                            <div class="referral-count" id="level2Count">0 Members</div>
                        </div>
                        <div class="referral-card">
                            <div class="referral-level">Level 3</div>
                            <div class="referral-percent">1%</div>
                            <div class="referral-count" id="level3Count">0 Members</div>
                        </div>
                        <div class="referral-card">
                            <div class="referral-level">Level 4</div>
                            <div class="referral-percent">1%</div>
                            <div class="referral-count" id="level4Count">0 Members</div>
                        </div>
                    </div>
                    
                    <div class="referral-link-box">
                        <h3>Your Referral Link</h3>
                        <p>Share this link to earn referral bonuses</p>
                        <div class="referral-link-container">
                            <div class="referral-link" id="referralLinkText">Connect wallet to get your referral link</div>
                            <button class="btn btn-copy" id="copyReferralLink" style="text-align: center;">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- How to Join Section -->
        <section id="how-to-join">
            <div class="container">
                <h2 class="section-title">How to Join</h2>
                <div class="steps-container">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Connect Wallet</h3>
                            <p>Click the "Connect Wallet" button on the homepage to link your MetaMask wallet to the BNBNexa platform. This allows you to interact with the smart contract securely.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Make Your Deposit</h3>
                            <p>Navigate to the Invest section and enter the amount of BNB you wish to deposit (minimum 0.01 BNB). Your investment will be locked for 120 days with daily returns.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Earn Daily Returns</h3>
                            <p>Start earning daily returns on your investment based on your selected plan. You can track your earnings and withdraw your ROI anytime through the Dashboard.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Withdraw Anytime</h3>
                            <p>Withdraw your ROI earnings or referral bonuses at any time directly to your connected wallet. No lock-in period for withdrawals.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h3>Earn Referral Bonuses</h3>
                            <p>Share your referral link with others and earn bonuses from their investments: 5% for Level 1, 3% for Level 2, and 1% for Levels 3 and 4.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq">
            <div class="container">
                <h2 class="section-title">Frequently Asked Questions</h2>
                <div class="faq-container">
                    <div class="faq-item">
                        <div class="faq-question">
                            What is BNBNexa?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            BNBNexa is a decentralized investment platform on the Binance Smart Chain that offers daily returns on BNB investments with a secure and transparent smart contract.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            What is the minimum investment?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            The minimum investment is 0.01 BNB. There is no maximum limit for investments.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            How long is the investment period?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            The investment period is fixed at 120 days. During this period, you earn daily returns on your investment based on your selected plan.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            When can I withdraw my earnings?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            You can withdraw your ROI earnings and referral bonuses at any time. There are no restrictions on withdrawals.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            How does the referral program work?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            The referral program has 4 levels: Level 1 (5%), Level 2 (3%), Level 3 (1%), and Level 4 (1%). You earn commissions from investments made by people in your referral network.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            Is BNBNexa safe and secure?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Yes, BNBNexa uses a secure and audited smart contract on the Binance Smart Chain. You can view the contract on BSCScan for transparency.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            What wallet do I need to use BNBNexa?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            You need a Web3 wallet like MetaMask that supports the Binance Smart Chain network to interact with the BNBNexa platform.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            Are there any fees?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            There is a small transaction fee for deposits and withdrawals to cover network costs. The exact fee is displayed before confirming any transaction.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            Can I invest multiple times?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Yes, you can make multiple investments. Each investment will have its own 120-day cycle and will generate returns independently.
                        </div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">
                            What happens after 120 days?
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            After 120 days, your investment cycle completes. You can choose to withdraw your initial investment along with all accumulated returns or reinvest for another cycle.
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Security Section -->
        <section id="security">
            <div class="container">
                <h2 class="section-title">Security</h2>
                <div class="security-content">
                    <p>BNBNexa's smart contract has been thoroughly tested and deployed on the Binance Smart Chain. The contract code is open source and available for public verification, ensuring transparency and security for all users.</p>
                    <p>Our contract includes multiple security features such as withdrawal limits, emergency pause functionality, and secure fund handling to protect user investments.</p>
                    <a href="https://bscscan.com/address/0x6285b520E525c20b57a3a0724baeC17f4d403934#code" target="_blank" class="btn">
                        <i class="fas fa-external-link-alt"></i> View on BSCScan
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-logo">
                <img src="https://files.catbox.moe/3g1eaq.png" alt="BNBNexa Logo">
            </div>
            <p class="footer-subheadline">Where Innovation Meets Stability – Farming Made Smarter on Binance Smart Chain</p>
            <div class="footer-links">
                <a href="#home">Home</a>
                <a href="#invest">Invest</a>
                <a href="#dashboard">Dashboard</a>
                <a href="#referral">Referral</a>
                <a href="#how-to-join">How to Join</a>
                <a href="#faq">FAQ</a>
                <a href="#security">Security</a>
            </div>
            <div class="social-icons">
                <a href="#"><i class="fab fa-telegram"></i></a>
                <a href="#"><i class="fab fa-whatsapp"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
            <p class="copyright">© 2025 BNBNexa</p>
        </div>
    </footer>

    <script>
        // Contract details
        const contractAddress = "0x6285b520E525c20b57a3a0724baeC17f4d403934";
        const contractABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":true,"internalType":"address","name":"referrer","type":"address"}],"name":"InvestmentMade","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"OwnerFeePaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"referrer","type":"address"},{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"level","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"ReferralPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"WithdrawalMade","type":"event"},{"inputs":[],"name":"FEE_WALLET","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"INVESTMENT_DURATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_INVESTMENT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"OWNER_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIER1_MAX","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIER1_ROI","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIER2_MAX","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIER2_ROI","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIER3_ROI","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getContractInfo","outputs":[{"internalType":"uint256","name":"contractBalance","type":"uint256"},{"internalType":"uint256","name":"_totalDeposits","type":"uint256"},{"internalType":"uint256","name":"_totalPaidROI","type":"uint256"},{"internalType":"uint256","name":"_totalPaidReferral","type":"uint256"},{"internalType":"uint256","name":"_totalUsers","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getPlanInfo","outputs":[{"internalType":"uint256","name":"minInvestment","type":"uint256"},{"internalType":"uint256","name":"investmentDuration","type":"uint256"},{"internalType":"uint256","name":"tier1Max","type":"uint256"},{"internalType":"uint256","name":"tier2Max","type":"uint256"},{"internalType":"uint256","name":"tier1ROI","type":"uint256"},{"internalType":"uint256","name":"tier2ROI","type":"uint256"},{"internalType":"uint256","name":"tier3ROI","type":"uint256"},{"internalType":"uint256","name":"ownerFee","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"address","name":"userAddress","type":"address"}],"name":"getUserInfo","outputs":[{"internalType":"uint256","name":"deposit","type":"uint256"},{"internalType":"uint256","name":"investmentDate","type":"uint256"},{"internalType":"uint256","name":"lastWithdrawal","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn","type":"uint256"},{"internalType":"address","name":"referrer","type":"address"},{"internalType":"uint256","name":"referralBonus","type":"uint256"},{"internalType":"uint256","name":"referralCount","type":"uint256"},{"internalType":"uint256","name":"availableROI","type":"uint256"},{"internalType":"uint256","name":"daysSinceInvestment","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"referrer","type":"address"}],"name":"invest","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"referralRates","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalPaidROI","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalPaidReferral","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalUsers","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"users","outputs":[{"internalType":"uint256","name":"deposit","type":"uint256"},{"internalType":"uint256","name":"investmentDate","type":"uint256"},{"internalType":"uint256","name":"lastWithdrawal","type":"uint256"},{"internalType":"uint256","name":"totalWithdrawn","type":"uint256"},{"internalType":"address","name":"referrer","type":"address"},{"internalType":"uint256","name":"referralBonus","type":"uint256"},{"internalType":"uint256","name":"referralCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}];

        // Global variables
        let provider;
        let signer;
        let contract;
        let userAddress;
        let selectedPlan = 0;
        let planRates = {
            1: 0.01, // 1% daily
            2: 0.012, // 1.2% daily
            3: 0.015 // 1.5% daily
        };

        // Plan minimum amounts
        const planMinAmounts = {
            1: 0.01, // Basic Plan
            2: 1,    // Standard Plan
            3: 5     // Premium Plan
        };

        // DOM Elements
        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('navMenu');
        const walletInfo = document.getElementById('walletInfo');
        const walletAddress = document.getElementById('walletAddress');
        const uplineAddressValue = document.getElementById('uplineAddressValue');
        const investNowBtn = document.getElementById('investNow');
        const depositAmountInput = document.getElementById('depositAmount');
        const selectedPlanElement = document.getElementById('selectedPlan');
        const dailyProfit = document.getElementById('dailyProfit');
        const totalReturn = document.getElementById('totalReturn');
        const investWarning = document.getElementById('investWarning');
        const investButton = document.getElementById('investButton');
        const activeDeposit = document.getElementById('activeDeposit');
        const availableROI = document.getElementById('availableROI');
        const referralBonus = document.getElementById('referralBonus');
        const depositExpiry = document.getElementById('depositExpiry');
        const totalWithdraw = document.getElementById('totalWithdraw');
        const withdrawROIBtn = document.getElementById('withdrawROI');
        const withdrawReferralBtn = document.getElementById('withdrawReferral');
        const roiAmount = document.getElementById('roiAmount');
        const referralAmount = document.getElementById('referralAmount');
        const level1Count = document.getElementById('level1Count');
        const level2Count = document.getElementById('level2Count');
        const level3Count = document.getElementById('level3Count');
        const level4Count = document.getElementById('level4Count');
        const referralLinkText = document.getElementById('referralLinkText');
        const copyReferralLinkBtn = document.getElementById('copyReferralLink');
        const faqItems = document.querySelectorAll('.faq-item');
        const toast = document.getElementById('toast');
        const successModal = document.getElementById('successModal');
        const investedAmount = document.getElementById('investedAmount');
        const goToDashboardBtn = document.getElementById('goToDashboard');
        const planCards = document.querySelectorAll('.plan-card');
        const tvlValue = document.getElementById('tvlValue');
        const totalUsers = document.getElementById('totalUsers');
        const totalPaidROI = document.getElementById('totalPaidROI');
        const totalPaidReferral = document.getElementById('totalPaidReferral');

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Hamburger menu toggle
            hamburger.addEventListener('click', function(e) {
                e.stopPropagation();
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (navMenu.classList.contains('active') && 
                    !navMenu.contains(e.target) && 
                    !hamburger.contains(e.target)) {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            });

            // Close menu when clicking on a link
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });

            // FAQ toggle
            faqItems.forEach(item => {
                const question = item.querySelector('.faq-question');
                question.addEventListener('click', () => {
                    item.classList.toggle('active');
                });
            });

            // Connect wallet automatically
            connectWallet();

            // Invest now button (home page)
            investNowBtn.addEventListener('click', function() {
                document.getElementById('invest').scrollIntoView({ behavior: 'smooth' });
            });

            // Plan selection
            planCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Remove active class from all cards
                    planCards.forEach(c => c.classList.remove('active'));
                    // Add active class to clicked card
                    this.classList.add('active');
                    // Update selected plan
                    selectedPlan = parseInt(this.getAttribute('data-plan'));
                    selectedPlanElement.textContent = this.querySelector('.plan-name').textContent;
                    
                    // Update minimum deposit amount based on plan
                    const minAmount = planMinAmounts[selectedPlan];
                    depositAmountInput.min = minAmount;
                    depositAmountInput.placeholder = `Minimum ${minAmount} BNB`;
                    
                    // Recalculate returns if deposit amount is set
                    calculateReturns();
                });
            });

            // Deposit amount input change
            depositAmountInput.addEventListener('input', calculateReturns);

            // Invest button
            investButton.addEventListener('click', invest);

            // Withdraw buttons
            withdrawROIBtn.addEventListener('click', withdrawROI);
            withdrawReferralBtn.addEventListener('click', withdrawReferral);

            // Copy referral link
            copyReferralLinkBtn.addEventListener('click', copyReferralLink);

            // Go to Dashboard button in modal
            goToDashboardBtn.addEventListener('click', function() {
                successModal.style.display = 'none';
                document.getElementById('dashboard').scrollIntoView({ behavior: 'smooth' });
            });

            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === successModal) {
                    successModal.style.display = 'none';
                }
            });

            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });

        // Show toast notification
        function showToast(message, duration = 3000) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // Connect wallet function
        async function connectWallet() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    // Request account access
                    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                    await setupWeb3(accounts[0]);
                    showToast('Wallet connected successfully!');
                } catch (error) {
                    console.error('User denied account access', error);
                    showToast('Please connect your wallet to continue.');
                }
            } else {
                showToast('Please install MetaMask to use this dApp!');
            }
        }

        // Setup Web3 connection
        async function setupWeb3(account) {
            userAddress = account;
            
            // Update UI
            walletAddress.textContent = `${userAddress.substring(0, 6)}...${userAddress.substring(userAddress.length - 4)}`;
            walletInfo.style.display = 'block';
            
            // Hide invest warning
            investWarning.style.display = 'none';
            
            // Setup provider and contract
            provider = new ethers.providers.Web3Provider(window.ethereum);
            signer = provider.getSigner();
            contract = new ethers.Contract(contractAddress, contractABI, signer);
            
            // Load user data
            await loadUserData();
            await loadContractStats();
            
            // Set up referral link
            const baseUrl = window.location.href.split('#')[0];
            referralLinkText.textContent = `${baseUrl}?ref=${userAddress}`;
            
            // Check for referral parameter in URL
            checkReferralParameter();
        }

        // Check for referral parameter in URL
        function checkReferralParameter() {
            const urlParams = new URLSearchParams(window.location.search);
            const refAddress = urlParams.get('ref');
            
            if (refAddress) {
                // In a real implementation, you would save this to the contract
                uplineAddressValue.textContent = `${refAddress.substring(0, 6)}...${refAddress.substring(refAddress.length - 4)}`;
                showToast('Referral link detected! Upline address saved.');
            } else {
                uplineAddressValue.textContent = 'No referral detected';
            }
        }

        // Calculate returns based on deposit amount and selected plan
        function calculateReturns() {
            const amount = parseFloat(depositAmountInput.value) || 0;
            
            if (amount >= 0.01 && selectedPlan > 0) {
                // Validate amount against plan minimum
                const minAmount = planMinAmounts[selectedPlan];
                if (amount < minAmount) {
                    showToast(`Minimum amount for ${selectedPlanElement.textContent} is ${minAmount} BNB`);
                    return;
                }
                
                const dailyRate = planRates[selectedPlan];
                const daily = amount * dailyRate;
                const total = daily * 120; // 120 days
                
                dailyProfit.textContent = `${daily.toFixed(4)} BNB`;
                totalReturn.textContent = `${total.toFixed(4)} BNB`;
            } else {
                dailyProfit.textContent = '0 BNB';
                totalReturn.textContent = '0 BNB';
            }
        }

        // Invest function
        async function invest() {
            if (!userAddress) {
                investWarning.style.display = 'block';
                return;
            }
            
            const amount = depositAmountInput.value;
            if (!amount || parseFloat(amount) < 0.01) {
                showToast('Please enter a valid amount (minimum 0.01 BNB)');
                return;
            }
            
            if (selectedPlan === 0) {
                showToast('Please select an investment plan');
                return;
            }
            
            // Validate amount against plan minimum
            const minAmount = planMinAmounts[selectedPlan];
            if (parseFloat(amount) < minAmount) {
                showToast(`Minimum amount for ${selectedPlanElement.textContent} is ${minAmount} BNB`);
                return;
            }
            
            try {
                investButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                investButton.disabled = true;
                
                // Convert BNB to wei
                const amountWei = ethers.utils.parseEther(amount);
                
                // Get referral address from URL if available
                const urlParams = new URLSearchParams(window.location.search);
                let referrerAddress = urlParams.get('ref');
                
                // If no referral in URL, use zero address
                if (!referrerAddress || !ethers.utils.isAddress(referrerAddress)) {
                    referrerAddress = "0x0000000000000000000000000000000000000000";
                }
                
                // Call invest function with referrer address
                const tx = await contract.invest(referrerAddress, { value: amountWei });
                
                showToast('Transaction submitted. Waiting for confirmation...');
                
                // Wait for transaction to be mined
                await tx.wait();
                
                // Show success modal
                investedAmount.textContent = amount;
                successModal.style.display = 'flex';
                
                // Reload user data
                await loadUserData();
                await loadContractStats();
                
                // Reset form
                depositAmountInput.value = '';
                selectedPlan = 0;
                selectedPlanElement.textContent = 'None';
                planCards.forEach(card => card.classList.remove('active'));
                calculateReturns();
                
            } catch (error) {
                console.error('Investment failed:', error);
                showToast('Investment failed. Please try again.');
            } finally {
                investButton.innerHTML = '<i class="fas fa-piggy-bank"></i> Invest Now';
                investButton.disabled = false;
            }
        }

        // Withdraw ROI function
        async function withdrawROI() {
            if (!userAddress) {
                showToast('Please connect your wallet first');
                return;
            }
            
            try {
                withdrawROIBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                withdrawROIBtn.disabled = true;
                
                // Call withdraw function
                const tx = await contract.withdraw();
                
                showToast('Withdrawal submitted. Waiting for confirmation...');
                
                // Wait for transaction to be mined
                await tx.wait();
                
                showToast('Withdrawal successful!');
                
                // Reload user data
                await loadUserData();
                await loadContractStats();
                
            } catch (error) {
                console.error('Withdrawal failed:', error);
                showToast('Withdrawal failed. Please try again.');
            } finally {
                withdrawROIBtn.innerHTML = '<i class="fas fa-hand-holding-usd"></i> Withdraw ROI';
                withdrawROIBtn.disabled = false;
            }
        }

        // Withdraw referral function
        async function withdrawReferral() {
            // In this contract, both ROI and referral are withdrawn with the same function
            await withdrawROI();
        }

        // Copy referral link to clipboard
        function copyReferralLink() {
            if (!userAddress) {
                showToast('Please connect your wallet first');
                return;
            }
            
            const textArea = document.createElement('textarea');
            textArea.value = referralLinkText.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            showToast('Referral link copied to clipboard!');
        }

        // Load user data from contract
        async function loadUserData() {
            if (!contract || !userAddress) return;
            
            try {
                // Get user info
                const userInfo = await contract.getUserInfo(userAddress);
                
                // Convert from wei to BNB
                const depositBNB = ethers.utils.formatEther(userInfo.deposit);
                const availableROIBNB = ethers.utils.formatEther(userInfo.availableROI);
                const referralBonusBNB = ethers.utils.formatEther(userInfo.referralBonus);
                const totalWithdrawnBNB = ethers.utils.formatEther(userInfo.totalWithdrawn);
                
                // Update UI
                activeDeposit.textContent = `${parseFloat(depositBNB).toFixed(4)} BNB`;
                availableROI.textContent = `${parseFloat(availableROIBNB).toFixed(4)} BNB`;
                referralBonus.textContent = `${parseFloat(referralBonusBNB).toFixed(4)} BNB`;
                totalWithdraw.textContent = `${parseFloat(totalWithdrawnBNB).toFixed(4)} BNB`;
                
                // Update withdrawal amounts
                roiAmount.textContent = `${parseFloat(availableROIBNB).toFixed(4)} BNB available`;
                referralAmount.textContent = `${parseFloat(referralBonusBNB).toFixed(4)} BNB available`;
                
                // Update referral counts
                level1Count.textContent = `${userInfo.referralCount.toString()} Members`;
                // For demo purposes, we'll set other levels as fractions of level 1
                const level1CountNum = parseInt(userInfo.referralCount.toString());
                level2Count.textContent = `${Math.floor(level1CountNum * 0.7)} Members`;
                level3Count.textContent = `${Math.floor(level1CountNum * 0.5)} Members`;
                level4Count.textContent = `${Math.floor(level1CountNum * 0.3)} Members`;
                
                // Update deposit expiry
                const investmentDate = new Date(userInfo.investmentDate.toNumber() * 1000);
                const daysSinceInvestment = userInfo.daysSinceInvestment.toNumber();
                const daysLeft = Math.max(0, 120 - daysSinceInvestment);
                
                if (parseFloat(depositBNB) > 0) {
                    depositExpiry.textContent = `Duration: ${daysLeft} Days Left`;
                } else {
                    depositExpiry.textContent = 'No Active Deposit';
                }
                
                // Update upline address if available
                if (userInfo.referrer !== "0x0000000000000000000000000000000000000000") {
                    uplineAddressValue.textContent = `${userInfo.referrer.substring(0, 6)}...${userInfo.referrer.substring(userInfo.referrer.length - 4)}`;
                }
                
            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // Load contract statistics
        async function loadContractStats() {
            if (!contract) return;
            
            try {
                const contractInfo = await contract.getContractInfo();
                
                // Convert from wei to BNB
                const tvlBNB = ethers.utils.formatEther(contractInfo.contractBalance);
                const totalDepositsBNB = ethers.utils.formatEther(contractInfo._totalDeposits);
                const totalPaidROIBNB = ethers.utils.formatEther(contractInfo._totalPaidROI);
                const totalPaidReferralBNB = ethers.utils.formatEther(contractInfo._totalPaidReferral);
                
                // Update UI
                tvlValue.textContent = `${parseFloat(tvlBNB).toFixed(2)} BNB`;
                totalUsers.textContent = contractInfo._totalUsers.toString();
                totalPaidROI.textContent = `${parseFloat(totalPaidROIBNB).toFixed(2)} BNB`;
                totalPaidReferral.textContent = `${parseFloat(totalPaidReferralBNB).toFixed(2)} BNB`;
                
            } catch (error) {
                console.error('Error loading contract stats:', error);
            }
        }
    </script>
</body>
</html>
